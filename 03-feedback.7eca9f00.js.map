{"mappings":"gfAAA,IA8E2BA,EAAOC,EA9ElCC,EAAAC,EAAA,SAGMC,EAAmB,sBAEnBC,EAAiBC,SAASC,cAAc,kBAExCC,EAAgBF,SAASC,cAAc,qBACvCE,EAAkBH,SAASC,cAAc,0BACzCG,EAAiB,GA8CvB,SAASC,EAAgBC,GACrB,IACI,IAAMC,EAAkBC,aAAaC,QAAQH,GAG7C,OAFmBI,KAAKC,MAAMJ,E,CAGhC,MAAOK,GACLC,QAAQC,IAAI,iBAAkBF,EAAIjB,Q,EAnD1CI,EAAegB,iBAAiB,SAAS,EAAAnB,EAAAoB,WAUzC,SAAyBC,GACrBb,EAAea,EAAMC,OAAOC,MAAQF,EAAMC,OAAOE,MAuBrD,SAAuBd,EAAKc,GACxB,IACI,IAAMC,EAAaX,KAAKY,UAAUF,GAClCZ,aAAae,QAAQjB,EAAKe,E,CAE5B,MAAOT,GACLC,QAAQC,IAAI,iBAAkBF,EAAIjB,Q,KAvBxBS,E,GAjBiD,MACnEL,EAAegB,iBAAiB,UAmBhC,SAAsBE,G,mBAMlBJ,QAAQC,IAAI,CAAEpB,MAAOQ,EAAckB,MAAOzB,QAASQ,EAAgBiB,QAEnEZ,aAAagB,QACbP,EAAMQ,cAAcC,O,IAzBxBb,QAAQC,IAAI,sBAAuBT,EAAgBP,IAmDnD,SAAyB6B,GAGA,IAAhBA,EACG,OAGwBd,QAAxBC,IAAI,uBAAwBa,GACpCzB,EAAckB,MAAQO,EAAKjC,MAAQiC,EAAKjC,MAAO,GAC/CS,EAAgBiB,MAAQO,EAAKhC,QAAUgC,EAAKhC,QAAS,E,CA1DzDiC,CAAgBvB,EAAgBP,IA6DEH,EA3DDQ,EA+D7BC,GAJuBV,EA3DTQ,GA+DOiB,MAAQzB,EAAM0B,MACnChB,EAAeT,EAAQwB,MAAQxB,EAAQyB,K","sources":["src/js/03-feedback.js"],"sourcesContent":["import { throttle } from \"lodash\";\n\n// Ключ для сховища буде рядок \"feedback-form-state\"\nconst KEY_DATA_STORAGE = \"feedback-form-state\";\n\nconst getFormElement = document.querySelector(\".feedback-form\");\n\nconst getEmailInput = document.querySelector(\"input[name=email]\");\nconst getMessageInput = document.querySelector(\"textarea[name=message]\");\nconst objectDataForm = {};\n\ngetFormElement.addEventListener('input', throttle(fillDataStorage, 500));\ngetFormElement.addEventListener('submit', onSubmitForm);\n\n\nconsole.log('Data from Storage: ', loadFromStorage(KEY_DATA_STORAGE))\n//     \ninputDataToForm(loadFromStorage(KEY_DATA_STORAGE))\n\nIsFornInputFilled(getEmailInput, getMessageInput)\n// =============================================================\nfunction fillDataStorage(event) {\n    objectDataForm[event.target.name] = event.target.value;\n    \n    /*\n        Відстежую на формі подію input, \n        і щоразу записую у локальне сховище об'єкт з полями email і message, \n        у яких зберігаю поточні значення полів форми */\n    saveInStorage(KEY_DATA_STORAGE, objectDataForm);\n};\n// =============================================================\nfunction onSubmitForm(event) { \n    /*\n        Під час сабміту форми очищую сховище і поля форми, \n        а також вивожу у консоль об'єкт з полями email, \n        message та їхніми поточними значеннями. */\n    event.preventDefault();\n    console.log({ email: getEmailInput.value, message: getMessageInput.value });\n\n    localStorage.clear();\n    event.currentTarget.reset();\n\n};\n// =======================================================\n// ======== Basicfunctions to work with the storage ======\nfunction saveInStorage(key, value) {\n    try {\n        const dataToSave = JSON.stringify(value);\n        localStorage.setItem(key, dataToSave);\n\n    } catch (err) { \n        console.log(\"Some problem: \", err.message)\n    }\n};\n\nfunction loadFromStorage(key) { \n    try {\n        const dataFromStorage = localStorage.getItem(key);\n        const parsedData = JSON.parse(dataFromStorage);\n\n        return parsedData\n    } catch (err) { \n        console.log(\"Some problem: \", err.message)\n    }\n};\n\nfunction inputDataToForm(data) {\n    // Під час завантаження сторінки перевіряю стан сховища, \n    // якщо там є збережені дані\n    if (!data) { \n            return;\n    }\n    // заповнюю поля форми даними зі сховища.\n    console.log('Data from function: ', data);\n    getEmailInput.value = data.email ? data.email: '';\n    getMessageInput.value = data.message ? data.message: '';\n}\n\nfunction IsFornInputFilled(email, message) { \n    //  при перезагрузкі сторінки об'єкт очищується, і при повторному заповнені полів об'єкт перезаписується\n    // щоб не втрачати дані з полів, при вигрузкі даних із сховища після перезагрузки сторінки передаю їх як\n    // початкові значення в об'єкт\n    objectDataForm[email.name] = email.value;\n    objectDataForm[message.name] = message.value;\n}"],"names":["email","message","$1WSnx","parcelRequire","$b00c40859be242c5$var$KEY_DATA_STORAGE","$b00c40859be242c5$var$getFormElement","document","querySelector","$b00c40859be242c5$var$getEmailInput","$b00c40859be242c5$var$getMessageInput","$b00c40859be242c5$var$objectDataForm","$b00c40859be242c5$var$loadFromStorage","key","dataFromStorage","localStorage","getItem","JSON","parse","err","console","log","addEventListener","throttle","event","target","name","value","dataToSave","stringify","setItem","clear","currentTarget","reset","data","$b00c40859be242c5$var$inputDataToForm"],"version":3,"file":"03-feedback.7eca9f00.js.map"}